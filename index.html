<!DOCTYPE html>
<html lang="be">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Слоўнік Ластоўскага (1924)</title>
  <style>
    body { font-family: sans-serif; margin: 0; padding: 0; background: #fdfdfd; color: #222; }
    header { background: #272727; color: #fff; padding: 1rem; text-align: center; }
    nav { display: flex; flex-wrap: wrap; justify-content: center; gap: 0.5rem; background: #f4f4f4; padding: 0.5rem; }
    nav button { border: none; background: #fff; padding: 0.4rem 0.8rem; cursor: pointer; border-radius: 4px; }
    nav button.active, nav button:hover { background: #ddd; }
    #searchBox { display: block; width: 90%; max-width: 400px; margin: 1rem auto; padding: 0.6rem; font-size: 1rem; border: 1px solid #ccc; border-radius: 4px; }
    main { padding: 1rem; max-width: 800px; margin: auto; }
    .entry { margin-bottom: 1rem; border-bottom: 1px solid #ccc; padding-bottom: 0.5rem; }
    .headword { font-weight: bold; }
    .modern { font-weight: normal; font-size: 1rem; color: #555; margin-left: 0.3rem; }
    .definition { margin-left: 1rem; }
    em { font-style: italic; }
  </style>
</head>
<body>
  <header><h1>Падручны расійска-крыўскі (беларускі) слоўнік, 1924</h1></header>
  <nav id="letterNav"></nav>
  <input type="text" id="searchBox" placeholder="Пошук…" />
  <main id="entries"></main>
  <script>
    const letters = ['А','Б','В','Г','Д','Е','Ж'];
    const fileMap = { А:'A.json', Б:'B.json', В:'V.json', Г:'G.json', Д:'D.json', Е:'E.json', Ж:'Zh.json' };
    const nav = document.getElementById('letterNav');
    const searchBox = document.getElementById('searchBox');
    const entriesEl = document.getElementById('entries');
    let currentEntries = [];
    
    // Build letter buttons
    letters.forEach(letter => {
      const btn = document.createElement('button');
      btn.textContent = letter;
      btn.addEventListener('click', () => loadLetter(letter));
      nav.appendChild(btn);
    });

    // Load JSON data for selected letter
    function loadLetter(letter) {
      nav.querySelectorAll('button').forEach(b => b.classList.toggle('active', b.textContent === letter));
      searchBox.value = '';
      fetch(fileMap[letter])
        .then(res => res.json())
        .then(data => {
          currentEntries = data;
          renderEntries(data);
        })
        .catch(() => {
          entriesEl.innerHTML = `<p>Не ўдалося загрузіць дадзеныя для літары ${letter}.</p>`;
        });
    }

    // Render list of entries
    function renderEntries(list) {
      entriesEl.innerHTML = '';
      if (list.length === 0) {
        entriesEl.innerHTML = '<p>Няма запісаў.</p>';
        return;
      }
      list.forEach(e => {
        const div = document.createElement('div'); div.className = 'entry';
        // Headword with optional modern spelling
        const head = document.createElement('span'); head.className = 'headword'; head.textContent = e.headword;
        if (e.modern && e.modern.toLowerCase() !== e.headword.toLowerCase()) {
          const modSpan = document.createElement('span');
          modSpan.className = 'modern';
          modSpan.textContent = `(${e.modern.toLowerCase()})`;
          head.appendChild(modSpan);
        }
        // Definition
        const def = document.createElement('div'); def.className = 'definition'; def.innerHTML = e.definition;
        div.appendChild(head);
        div.appendChild(def);
        entriesEl.appendChild(div);
      });
    }

    // Search filter
    searchBox.addEventListener('input', () => {
      const q = searchBox.value.toLowerCase().trim();
      if (!q) {
        renderEntries(currentEntries);
        return;
      }
      const filtered = currentEntries.filter(e =>
        e.headword.toLowerCase().includes(q) ||
        (e.modern && e.modern.toLowerCase().includes(q)) ||
        e.definition.replace(/<[^>]*>/g, '').toLowerCase().includes(q)
      );
      renderEntries(filtered);
    });

    // Initialize with letter A
    loadLetter('А');
  </script>
</body>
</html>
